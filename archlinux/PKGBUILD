# Maintainer: Ryan Whittingham <echo cnlhbndoaXR0aW5naGFtODlAZ21haWwuY29t | base64 -d>

_gituser="ryw89"
_gitrepo="pacr"

pkgname=pacr
pkgdesc='Generate PKGBUILDs for R packages on CRAN.'
pkgver=r25.d222bfe
pkgrel=1
license=('GPL-3')
depends=('ruby' 'ruby-bundler' 'ruby-nokogiri')
url="https://github.com/${_gituser}/${_gitrepo}"
arch=('any')
source=("git+https://github.com/${_gituser}/${_gitrepo}.git")
sha256sums=('SKIP')

pkgver() {
  cd "$_gitrepo"
  printf "r%s.%s" $(git rev-list --count HEAD) $(git rev-parse --short HEAD)
}

package() {
  cd "$srcdir/$_gitname/$_gitrepo"
  mkdir -p $pkgdir/usr/bin
  cp pacr.rb $pkgdir/usr/bin/pacr
  mkdir -p $pkgdir/usr/share/pacr
  cp config.yaml $pkgdir/usr/share/pacr/config.yaml
}
